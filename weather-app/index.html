<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What to Wear</title>
    <style>
        :root {
            --cupid-pink: #E6748E;
            --melon: #FF99BE;
            --lychee: #EDECDB;
            --sky-blue: #96CBFC;
            --sky-cloud: #4E8BC4;
        }

        body { 
            background: linear-gradient(135deg, var(--sky-cloud) 0%, var(--lychee) 100%);
            font-family: 'optima', 'Didot', 'serif'; 
            color: #444;
            display: flex;
            justify-content: center;
            padding: 40px 20px;
            min-height: 100vh;
            margin: 0;
        }

        .container { 
            background: white;
            padding: 3rem;
            border-radius: 2px; 
            box-shadow: 20px 20px 0px var(--melon); 
            width: 100%;
            max-width: 500px;
            text-align: center;
            border: 1px solid #eee;
        }

        h2 { 
            color: var(--cupid-pink); 
            text-transform: uppercase; 
            letter-spacing: 4px; 
            font-weight: 300;
            margin-bottom: 2rem;
        }

        input { 
            border: none;
            border-bottom: 1px solid var(--sky-blue);
            padding: 10px;
            width: 100%;
            margin-bottom: 2rem;
            font-size: 1.1rem;
            outline: none;
            background: transparent;
            color: #555;
        }

        button { 
            background: var(--sky-blue);
            color: white;
            border: none;
            padding: 15px 40px;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: 0.4s;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        button:hover { 
            background: var(--cupid-pink);
            letter-spacing: 4px;
        }

        /* This is the results container styling */
        #outfit-display {
            display: none; /* Hidden until city is searched */
            margin-top: 5rem;
            animation: fadeIn 1s ease;
            border-top: 1px solid var(--lychee);
            padding-top: 2rem;
        }

        #outfit-img {
            width: 100%;
            filter: sepia(10%) contrast(90%); 
            margin-top: 1.5rem;
            border: 10px solid white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .temp-text {
            font-size: 2.5rem;
            color: var(--sky-blue);
            margin-bottom: 0.5rem;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h2>Style Suggester</h2>
    <p>Enter a city to see what you should wear.</p>
    <input type="text" id="cityInput" placeholder="e.g. Pittsburgh">
    <button onclick="getOutfit()">Get Suggestion</button>

    <div id="outfit-display">
        <div id="weatherInfo" class="temp-text"></div>
        <div id="suggestion" style="font-weight: bold; margin-top: 10px;"></div>
        <img id="outfit-img" src="" alt="Outfit Suggestion">
    </div>
    
    <br>
    <br>
    <a href="../index.html" style="font-size: 0.8rem; color: #666; text-decoration: none;">← Back to Portfolio</a>
</div>

<script>
    async function getOutfit() {
        const city = document.getElementById('cityInput').value;
        const display = document.getElementById('outfit-display');
        const weatherInfo = document.getElementById('weatherInfo');
        const suggestion = document.getElementById('suggestion');
        const outfitImg = document.getElementById('outfit-img');

        if (!city) return alert("Enter a city!");

        const BACKEND_URL = 'https://weather-style-backend.onrender.com/suggest';

        try {
            const response = await fetch(BACKEND_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ city: city })
            });

            const data = await response.json();

            if (response.ok) {
                // Matching your editorial design
                weatherInfo.innerText = `${data.temp}°F`;
                suggestion.innerText = data.suggestion;
                
                // Set the image source using the /images/ folder
                outfitImg.src = "./images/" + data.image;
                
                // Show the container
                display.style.display = 'block';
            } else {
                display.style.display = 'block';
                suggestion.innerText = data.error || "City not found.";
                weatherInfo.innerText = "";
                outfitImg.src = ""; 
            }
        } catch (err) {
            display.style.display = 'block';
            suggestion.innerText = "Error: Could not connect to backend.";
            console.error(err);
        }
    }
</script>

</body>
</html>